<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gangneung Lifesaver Map</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=q5smdu0gl4"></script>
</head>
<body>
    <div id="map" style="width:100%; height:500px;"></div>
    <script>
        const map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.62744522, 129.0491638),
            zoom: 11
        });

        fetch('https://gangneung-lifesaver-api-vcj2.onrender.com/lifesavers')
            .then(response => response.json())
            .then(data => {
                data.forEach(item => {
                    const marker = new naver.maps.Marker({
                        position: new naver.maps.LatLng(item.latitude, item.longitude),
                        map: map
                    });

                    const infoWindow = new naver.maps.InfoWindow({
                        content: `<div><strong>${item.address}</strong><br>${item.desc}</div>`
                    });

                    naver.maps.Event.addListener(marker, 'click', () => {
                        infoWindow.open(map, marker);
                    });
                });
            })
            .catch(err => console.log("데이터 불러오기 실패:", err));
    </script>
</body>
</html>
